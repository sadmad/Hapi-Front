import {
  Link,
  Navigate,
  NavigationContext,
  Route,
  Routes,
  matchPath,
  useLocation,
  useNavigate,
  useParams
} from "./chunk-HQE7N4GM.js";
import {
  $,
  Dt,
  Pt,
  Rt,
  Te,
  Y,
  ns,
  qo,
  require_lib,
  vt
} from "./chunk-KNJ3NH6K.js";
import "./chunk-AHP4RG5K.js";
import "./chunk-7QQWTS7N.js";
import {
  require_react
} from "./chunk-OE6NBOXF.js";
import {
  __toESM
} from "./chunk-AUZ3RYOM.js";

// node_modules/@refinedev/react-router-v6/dist/index.mjs
var import_react = __toESM(require_react(), 1);
var import_react2 = __toESM(require_react(), 1);
var import_qs = __toESM(require_lib(), 1);
var import_react3 = __toESM(require_react(), 1);
var import_react4 = __toESM(require_react(), 1);
var import_react5 = __toESM(require_react(), 1);
var import_react6 = __toESM(require_react(), 1);
var import_react7 = __toESM(require_react(), 1);
var import_react8 = __toESM(require_react(), 1);
var import_react9 = __toESM(require_react(), 1);
var import_react10 = __toESM(require_react(), 1);
var h = (t) => {
  if (typeof t > "u")
    return t;
  let o = Number(t);
  return `${o}` === t ? o : t;
};
var x = { addQueryPrefix: true, skipNulls: true, arrayFormat: "indices", encode: false, encodeValuesOnly: true };
var D = { go: () => {
  let { search: t, hash: o } = useLocation(), r = useNavigate();
  return (0, import_react2.useCallback)(({ to: s, type: n, query: e, hash: a, options: { keepQuery: c, keepHash: f } = {} }) => {
    let u = { ...c && t && import_qs.default.parse(t, { ignoreQueryPrefix: true }), ...e };
    u.to && (u.to = encodeURIComponent(`${u.to}`));
    let p = Object.keys(u).length > 0, m = `#${(a || f && o || "").replace(/^#/, "")}`, d = m.length > 1, C = `${s || ""}${p ? import_qs.default.stringify(u, x) : ""}${d ? m : ""}`;
    return n === "path" ? C : r(C, { replace: n === "replace" });
  }, [o, t, r]);
}, back: () => {
  let t = useNavigate();
  return (0, import_react2.useCallback)(() => {
    t(-1);
  }, [t]);
}, parse: () => {
  var c;
  let t = useParams(), { pathname: o, search: r } = useLocation(), { resources: i } = (0, import_react2.useContext)(Rt), { resource: s, action: n, matchedRoute: e } = import_react.default.useMemo(() => qo(o, i), [i, o]);
  return Object.entries(t).length === 0 && e && (t = ((c = matchPath(e, o)) == null ? void 0 : c.params) || {}), (0, import_react2.useCallback)(() => {
    let f = import_qs.default.parse(r, { ignoreQueryPrefix: true }), u = { ...t, ...f };
    return { ...s && { resource: s }, ...n && { action: n }, ...(t == null ? void 0 : t.id) && { id: decodeURIComponent(t.id) }, pathname: o, params: { ...u, current: h(u.current), pageSize: h(u.pageSize), to: u.to ? decodeURIComponent(u.to) : void 0 } };
  }, [o, r, t, s, n]);
}, Link: import_react.default.forwardRef(function(o, r) {
  return import_react.default.createElement(Link, { ...o, ref: r });
}) };
var B = (t, o) => {
  let { name: r, list: i, create: s, show: n, edit: e } = t;
  if (typeof i == "string" && o === "list")
    return i;
  if (typeof i == "object" && o === "list")
    return i.path;
  if (typeof s == "string" && o === "create")
    return s;
  if (typeof s == "object" && o === "create")
    return s.path;
  if (typeof n == "string" && o === "show")
    return n;
  if (typeof n == "object" && o === "show")
    return n.path;
  if (typeof e == "string" && o === "edit")
    return e;
  if (typeof e == "object" && o === "edit")
    return e.path;
  let a = `/${r}`, c = `${["edit", "create", "clone", "show"].includes(o) ? o : ""}`, f = `${["edit", "show", "clone"].includes(o) ? ":id" : ""}`;
  return [a, c, f].filter(Boolean).join("/");
};
var T = (t) => t.flatMap((r) => {
  let i = [];
  return ["list", "show", "edit", "create"].forEach((s) => {
    let n = r[s];
    if (typeof n < "u" && typeof n != "string") {
      let e = typeof n == "function" ? n : n.component, a = B(r, s);
      i.push({ action: s, element: e, path: a }), s === "create" && i.push({ action: "clone", element: e, path: a });
    }
  }), i.map(({ action: s, element: n, path: e }) => {
    let a = import_react4.default.createElement(n, null);
    return import_react4.default.createElement(Route, { key: `${s}-${e}`, path: e, element: a });
  });
});
var G = ({ children: t }) => {
  let { resources: o } = Y(), r = import_react3.default.useMemo(() => T(o), [o]);
  return t ? t(r) : import_react3.default.createElement(Routes, null, r);
};
var O = ({ resource: t, meta: o }) => {
  let r = Dt(), { resource: i, resources: s } = Y(t), n = i || s.find((e) => e.list);
  if (n) {
    let e = r({ resource: n, action: "list", meta: o });
    return e ? import_react5.default.createElement(Navigate, { to: e }) : (console.warn("No resource is found to navigate to."), null);
  }
  return console.warn("No resource is found to navigate to."), null;
};
function J(t, o = true) {
  let { navigator: r } = import_react7.default.useContext(NavigationContext);
  import_react7.default.useEffect(() => {
    if (!o)
      return;
    let i = r.go, s = r.push;
    return r.push = (...n) => {
      t() !== false && s(...n);
    }, r.go = (...n) => {
      t() !== false && i(...n);
    }, () => {
      r.push = s, r.go = i;
    };
  }, [r, t, o]);
}
function w(t, o = true, r, i = false) {
  let s = import_react7.default.useCallback((e) => (e.preventDefault(), e.returnValue = t, e.returnValue), [t]);
  import_react7.default.useEffect(() => (o && !i && window.addEventListener("beforeunload", s), () => {
    window.removeEventListener("beforeunload", s);
  }), [s, o, i]);
  let n = import_react7.default.useCallback(() => {
    let e = window.confirm(t);
    return e && r && r(), e;
  }, [t]);
  J(n, o);
}
var _ = ({ translationKey: t = "warnWhenUnsavedChanges", message: o = "Are you sure you want to leave? You have unsaved changes." }) => {
  let r = $(), { pathname: i } = useLocation(), { warnWhen: s, setWarnWhen: n } = vt();
  import_react6.default.useEffect(() => () => n == null ? void 0 : n(false), [i]);
  let e = import_react6.default.useMemo(() => r(t, o), [t, o, r]);
  return w(e, s, () => {
    n == null || n(false);
  }), null;
};
var oe = ({ to: t }) => {
  let { pathname: o, search: r } = useLocation(), i = `${o}${r}`, s = i.length > 1 ? `?to=${encodeURIComponent(i)}` : "";
  return import_react8.default.createElement(Navigate, { to: `${t}${s}` });
};
function ce({ handler: t }) {
  var d;
  let o = useLocation(), { action: r, id: i, params: s, pathname: n, resource: e } = Te(), a = $(), c = Pt(), f = (e == null ? void 0 : e.identifier) ?? (e == null ? void 0 : e.name), p = (e == null ? void 0 : e.label) ?? ((d = e == null ? void 0 : e.meta) == null ? void 0 : d.label) ?? c(f, r === "list" ? "plural" : "singular"), m = a(`${e == null ? void 0 : e.name}.${e == null ? void 0 : e.name}`, p);
  return (0, import_react9.useLayoutEffect)(() => {
    let g = ns(a, e, r, `${i}`, p);
    t ? document.title = t({ action: r, resource: { ...e ?? {}, label: m, meta: { ...e == null ? void 0 : e.meta, label: m } }, params: s, pathname: n, autoGeneratedTitle: g }) : document.title = g;
  }, [o]), import_react9.default.createElement(import_react9.default.Fragment, null);
}
var me = (t) => {
  let o = $();
  return (0, import_react10.useEffect)(() => {
    t && (typeof t == "string" ? document.title = o(t) : document.title = o(t.i18nKey));
  }, [t]), (r) => {
    typeof r == "string" ? document.title = o(r) : document.title = o(r.i18nKey);
  };
};
export {
  oe as CatchAllNavigate,
  ce as DocumentTitleHandler,
  O as NavigateToResource,
  G as RefineRoutes,
  _ as UnsavedChangesNotifier,
  D as default,
  x as stringifyConfig,
  me as useDocumentTitle
};
//# sourceMappingURL=@refinedev_react-router-v6.js.map
